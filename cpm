#!/usr/bin/env bash
if ${DEBUG}; then
	set -x
fi

PKGSGITURL='https://raw.githubusercontent.com/slothds/cpm-packages/master'
PKGSLOCALD="${HOME}/.local/cpm/packages"
PKGSLIST='packages.list'

WRKDIR=$(dirname $(realpath $0))

MODDIR="${WRKDIR}/modules.d"
FUNDIR="${WRKDIR}/functions.d"
VERDIR="/var/db/cpm"
TMPDIR="/tmp/cpm"

for func in ${FUNDIR}/*.func; do
    source ${func}
done

ALL=false
INSTALL=false
DEBUG=false
SILENT=false
UPDATE=false

if [[ -n $(which getopt) ]]; then
    parse-getopt  $@
else
    parse-getopts $@
fi

check-dir ${VERDIR} ${TMPDIR}

# IFS=','
# for DIR in ${PKGDIR}; do
#     IFS=$'\r\n\t '
#     for pkg in ${DIR}/*; do
#         [[ -f ${pkg} ]] && \
#             get-package ${DIR} $(basename ${pkg}) ${RUNMODE}
#     done
# done

clean-up
